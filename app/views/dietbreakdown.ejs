<link rel="stylesheet" type="text/css" href="/dietbreakdown.css">
<% include partials/head.ejs %>
</head>
<body onload="getUserId()">
<% include partials/navbar.ejs %>

<div class="container">
    <h2>Diet Nutritional Breakdown</h2>
    <hr>
    <table id="nutritionTable">
        <thead>
            <th>Nutrient</th>
            <th>Your Intake</th>
            <th>RDA</th>            
            <th>Difference</th>
        </thead>
        <tbody>
        <% var rdaArray = []; %>
        <% var diffArray = []; %>
        <% i=0; %>
        <% for (var key in rda) { %>
            <% if (rda.hasOwnProperty(key)) { %>
                <% rdaArray.push(rda[key]); %>
                <% diffArray.push(Math.round((100-rda[key])*100/100)); %>
            <% } %>
        <% } %>
        <% for (var key in nutrients) { %>
            <% if (nutrients.hasOwnProperty(key)) { %>
                <tr>
                    <td><%= key %></td> 
                    <td><%= nutrients[key] %></td> 
                    <td><%= rdaArray[i]+"%" %></td>
                    <td><%= diffArray[i]+"%" %></td>
                    <% i++; %>
                </tr>
            <% } %>
        <% } %>
        </tbody>
    </table>
</div>

<script src="/foodlog.js"></script>
<% include partials/footer.ejs %>